<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

<head>
<script type="text/javascript" src="../h.js"></script>

<title>all</title>

<link rel=StyleSheet href="../QM-Help.css">

</head>

<body>

<h1><A name="IDP_S_FIX"></a>Allocate or free string buffer</h1>

<h3>Syntax1 - allocate</h3>

<pre class=syntax>s.<b>all</b>(<i></i>length<i> [</i>flags<i>] [</i>fillchar<i>]</i>)</pre>

<p>&nbsp;</p>

<h3>Syntax2 - compact</h3>

<pre class=syntax>s.<b>all</b>(<i></i>-1<i></i><i></i>)</pre>

<p>&nbsp;</p>

<h3>Syntax3 - free</h3>

<pre class=syntax>s.<b>all</b></pre>

<p>&nbsp;</p>

<h3>Parameters</h3>

<div class="parts">
<p> <b>s</b> - str variable.</p>

<p> <b>length </b>- number of bytes to allocate, not including the terminating null 
character.</p>

<p> <b><a href="../Other/IDP_FLAGS.html">flags</a></b>:</p>
<table class="tflags">
<tr>
<td> 1</td> <td>Preserve previous string (max <b>length </b>bytes).</td>
</tr>
<tr>
<td> 2</td> <td>Set string length (<i>len</i> 
<A href="IDP_S_DATA.html">property</a>) to <b>length</b>. If this flag not used, <i>len</i> 
will be 0 or length of preserved string.</td>
</tr>

</table>

<p> <b>fillchar</b> - <a href="../Tables/IDP_ASCII.html">character</a> to fill 
allocated string (except preserved part). If omitted, allocated string content 
is undefined. In <a href="../Other/IDP_UNICODE.html">Unicode</a> mode <b>fillchar</b> must 
be an ASCII character.</p>
</div>
<p>&nbsp;</p>

<h3>Remarks</h3>

<h4> Syntax1</h4>
<p>Allocates string 
  buffer (memory).</p>
<p>&nbsp;</p>
<p> Sets <i>nc</i> <A href="IDP_S_DATA.html">property</a> to the number of allocated bytes, not including 
  the terminating null character.</p>
<p>&nbsp;</p>
<p> For better performance, may allocate more than <b>length</b> bytes.</p>
<p>&nbsp;</p>
<h4>Syntax2</h4>
<p>Compacts string buffer. It frees extra memory that may be added 
  or not freed by other string functions. Extra memory is used to avoid frequent reallocations.</p>
<p>&nbsp;</p>
<h4>Syntax3</h4>
<p> Frees string buffer. Sets <i>lpstr</i>, <i>len</i> and <i>length</i> <A href="IDP_S_DATA.html">properties</a> to 0.</p>
<p>&nbsp;</p>
<p><i>See also:</i> <a href="IDP_S_FIX.html">str.fix</a>.</p>
<p>&nbsp;</p>
<h4>Tips</h4>
<p>Function <span class="blue">all</span> can be used to allocate buffer before 
  calling a dll function that requires pointer to buffer. When dll function returns, 
  use function <span class="blue">fix</span> without <b>length</b> or with <b>length</b> 
  = dll function's return value.</p>

<p>&nbsp;</p>

<h3>Example</h3>

<pre class=cod><span class=t>int</span> hwnd <span class=o>=</span> <span class=fq>win</span><span class=p>()</span>
<span class=t>str</span> s
s.<span class=fq>all</span><span class=p>(</span><span class=n>256</span><span class=p>)</span>
<span class=t>int</span> i <span class=o>=</span> <span class=fd>GetWindowText</span><span class=p>(</span>hwnd s <span class=n>256</span><span class=p>)</span>
s.<span class=fq>fix</span><span class=p>(</span>i<span class=p>)</span>
<span class=c> or:</span>
<span class=t>str</span> s.<span class=fq>fix</span><span class=p>(</span><span class=fd>GetWindowText</span><span class=p>(</span><span class=fq>win</span><span class=p>()</span> s.<span class=fq>all</span><span class=p>(</span><span class=n>256</span><span class=p>)</span> <span class=n>256</span><span class=p>))</span></pre>
<p>&nbsp;</p>
</body>
</html>
